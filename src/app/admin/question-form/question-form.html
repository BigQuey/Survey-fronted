<div class="admin-container">
  <div class="question-panel">
    <div class="panel-header">
      <h2>📋 Preguntas Existentes</h2>
      <p>Gestiona o revisa las preguntas ya creadas</p>
    </div>

    <div *ngIf="isLoading" class="loading-spinner">
      <div class="spinner"></div>
      <p>Cargando preguntas...</p>
    </div>

    <ul class="question-list" *ngIf="!isLoading">
      <li *ngIf="existingQuestions.length === 0" class="empty-state">
        Aún no hay preguntas registradas.
      </li>

      <li
        *ngFor="let q of existingQuestions"
        class="question-card"
      >
        <div class="question-info">
          <h4>{{ q.text }}</h4>
          <span class="type-label">{{ q.type | titlecase }}</span>
        </div>
        <button class="delete-btn" type="button">🗑️</button>
      </li>
    </ul>
  </div>

  <div class="form-panel">
    <div class="panel-header">
      <h2>✨ Crear Nueva Pregunta</h2>
      <p>Agrega una pregunta personalizada a la encuesta</p>
    </div>

    <form [formGroup]="questionForm" (ngSubmit)="onSubmit()" class="question-form">
      <div class="form-group">
        <label for="text">Texto de la pregunta</label>
        <input
          id="text"
          type="text"
          formControlName="text"
          placeholder="Ej: ¿Cuál es tu nivel de satisfacción?"
        />
      </div>

      <div class="form-group">
        <label for="type">Tipo de pregunta</label>
        <select id="type" formControlName="type">
          <option *ngFor="let type of questionTypes" [value]="type">
            {{ type | titlecase }}
          </option>
        </select>
      </div>

      <div
        *ngIf="questionForm.get('type')?.value === 'select' || questionForm.get('type')?.value === 'radio'"
        class="options-container"
      >
        <h5>Opciones de respuesta</h5>

        <div formArrayName="options">
          <div
            *ngFor="let option of options.controls; let i = index"
            class="option-row"
          >
            <input
              type="text"
              [formControlName]="i"
              placeholder="Opción {{ i + 1 }}"
            />
            <button type="button" class="remove-option" (click)="removeOption(i)">
              ✖
            </button>
          </div>
        </div>

        <button type="button" class="add-option" (click)="addOption()">
          + Añadir opción
        </button>
      </div>

      <button
        type="submit"
        class="save-btn"
        [disabled]="questionForm.invalid"
      >
        💾 Guardar Pregunta
      </button>
    </form>
  </div>
</div>